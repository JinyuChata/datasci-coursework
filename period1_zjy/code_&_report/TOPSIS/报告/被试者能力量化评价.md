# 一、被试者能力评价体系的建立

## 0. 被试者分组的建立

- 已知Mooctest平台提供的数据，是基于将近300名被测者分成五组，且五组题目各不相同、组间题目重合度低、但是组内题目相同、组间题目难度相似。

- 又由于Mooctest平台未提供分组数据，我们根据***同分组题目组相同***、***每组均有同学完成全部题目***这两个已知条件，设计代码进行分组，代码见仓库；

- 分组结果：

  - 各分组人数

    ![image-20200711102303944](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711102305.png)

  - 各分组题目数目

    ![image-20200711102448936](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711102450.png)

  - 具体分组数据（被试者属于哪一组、每一组有哪些题目）见仓库`group-tests.json`、`group-result.json`

## 1. 评价指标的选取

- 基于已有数据对被试者的能力进行评价，最重要的是根据被试者的提交次数、每次提交成绩、最终提交成绩与提交代码质量进行分析。根据上述***1.0***部分我们已经对总计300余名被试者的分组情况进行确定。

- 显然，最终提交得分越高、提交题目占为被试者提供题目比例越大，则被试者在此方面的能力越强。然而，多次提交等刷分行为、直接面向测试用例编程的作弊行为等，也均会影响被试者能力评价体系的建立。

- 当被试者存在面向用例的作弊行为时，在最终提交得分处获得的高评价一定会被否决。但是，由于慕测平台提供的数据仅限于***提交记录***、而非***测试用例运行记录***，所以对题均提交次数的研究价值不大。（1）

- 我们在理论分析的基础性上，结合了已知数据的可靠性，确定了以下指标及处理方法：

  1. 题目需要分类处理，不同类型间题目不具有可比较性；

  2. 被试者需要根据所做题目不同划分为不同组别，不同组别被试者不具有可比较性；

  3. 提交成绩选用两组数据统计量：

     1. 对于每道题目，我们均将最高提交得分作为最终得分指标，最高得分越高，说明对该题目的解答正确性越高；

     2. 对于每次提交，我们将某题目的所有提交计算算术平均分，该项分值越高，说明此被试者在本道题目中表现越好；

  4. 作答完整度选用两组数据统计量：

     1. 作答题目数与全部题目数比：该项比例越高，说明答题越完整；
     2. 提交次数与作答题目数比：该项比例越低，说明本题对于此被试者耗费的精力越少。由于（1）的原因，该项权重不应过大；

  5. 诚信指标主要采用一组数据：

     1. 诚信指标：被试者面向用例等不诚信行为次数多，最终评分一定差。

- 我们采用如图所示的方法对两两指标的重要性进行检验

  |   等级   | 同样重要 | 优秀 | 明显重要 | 强烈重要 | 很差 |
  | :------: | :------: | :--: | :------: | :------: | :--: |
  | 量化指标 |    1     |  3   |    5     |    7     |  9   |



## 2. 评价指标的检验

- 为确保上述指标的适用性，我们使用层次分析法进行检验

  ![层次分析法对指标的检验](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711100430.png)

- 在选择不同准则时，我们考虑到每道题目均有自然的分类，对不同分类的题目都进行一次指标重要性调查是很有必要的

- 重要性填表：==TODO== 此处应有8张表

  ![image-20200711101134365](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711101314.png)

- 可得方案层对目标层的权重为
  
  ==TODO==此处需要编排数据以通过一致性检验
  
  - 通过一致性检验



# 二、TOPSIS 法与评价指标模型的建立

## 1. TOPSIS模型背景

> TOPSIS（Technique for Order Preference by Similarity to Ideal Solution, 逼近理想解排序法 或 优劣解分析法），是一种常用的综合评价方法，充分利用原始数据信息，精确的反应各个评价方案之间的差距

- 选用`TOPSIS`模型，可以将分析一中已获取的评价指标，作为其权重参与运算；
- 选取层次分析中相似的统计量，采用层次分析中的指标，限制程度大大降低，不需要目标函数亦不需要通过检验。同时，层次分析中的结论也可参与使用。

## 2. TOPSIS算法过程

1. 将原始数据正向化

   我们选用的某些指标，指标值越高、显示被试者能力越强；而亦存在一些指标，其值越高、显示被试者能力越弱。有必要将所有指标进行统一的正向化，方便运算。

   <img src="https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711104627.png" alt="image-20200711104623529" style="zoom:50%;" />

   此次分析中，仅存在极小型指标需要正向化，使用极小型转极大型的简单公式：

   
	$$
   x^{*} = x_{\rm max}-x
  $$
  即可完成转换

2. 正向化矩阵标准化

   为消除不同量纲的影响，我们将已正向化的矩阵*X*进行标准化处理：
   $$
   X=\begin{gathered}
   \begin{pmatrix} x_{11} & x_{12} & ... & x_{1m} \\ x_{21} & x_{22} & ... & x_{2m} \\ ... & ... & ... & ... \\ x_{n1} & x_{n2} & ... & x_{nm} \\ \end{pmatrix}
   \quad
   \end{gathered}
   $$
   

   将标准化矩阵记为*Z*，有
   $$
   z_{ij}=x_{ij}/\sqrt{\sum_{i=1}^{n}x_{ij}^2}
   $$
   

3. 计算得分

   若有*n*个要评价的对象，*m*个评价指标的标准化矩阵
   $$
   Z=\begin{gathered}
   \begin{pmatrix} z_{11} & z_{12} & ... & z_{1m} \\ z_{21} & z_{22} & ... & z_{2m} \\ ... & ... & ... & ... \\ z_{n1} & z_{n2} & ... & z_{nm} \\ \end{pmatrix}
   \quad
   \end{gathered}
   $$
   定义：
   $$
   Z^+_{k}={\rm max}\{{z_{1k}},{z_{2k}},...,{z_{nk}}\}\\
   Z^-_{k}={\rm min}\{{z_{1k}},{z_{2k}},...,{z_{nk}}\}\\
   Z^+=(Z_1^+,Z_2^+,...,Z_m^+)\\
   Z^-=(Z_1^-,Z_2^-,...,Z_m^-)
   $$
   定义：
   $$
   \omega_j
   $$
   为第j个评价指标相对于总体的权重，其值应由层次分析法得到

   定义第*i*个评价对象与最大值和最小值的距离：
   $$
   D^+_i=\sqrt{\sum^m_{j=1}\omega_j(Z^+_j-z_{ij})^2}\\
   D^-_i=\sqrt{\sum^m_{j=1}\omega_j(Z^-_j-z_{ij})^2}
   $$
   最终，可以算出第*i*个评价对象未归一化的得分：
   $$
   S_i=\frac{D_i^-}{D_i^++D_i^-}
   $$

4. 对*Si*的解释：

   使用层次分析法结果加权后，Si即可看做被试者的平均得分，越高则能力越强

## 3. 数据处理

- 依据评价体系与2.2中算法，被试者最终得分越高则其能力越强

- 为了能够统一被试者的能力标准，依据1.0中*组间题目不同但难度相似*的前提，我们在分组得到基本统计量后，将不同组别合并处理，依据2.2中算法，得到最终分数。下图为部分同学在*查找算法*项目中的得分情况：

  > *S score*项为TOPSIS中所得*Si*同倍数放大后的结果

  ==TODO==Example Fronted Ratio

  ![image-20200711164326727](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711164328.png)

- 依据上述数据制图，得到每位同学的能力分布雷达图，下面为id为47774，47920两位同学的能力分布雷达图：

  ![image-20200711205410672](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711205411.png)

  - 分析雷达图后，我们发现完成率高的同学们，能力分布大体形状一致，但存在少许差别；
  - 即采用TOPSIS法分析同学们的能力分布基本合理。

- 依据上述数据制图，我们还可以得到各组同学之间的能力分布差距（基于各组题目难度大致相同的前提）

  ![shu-jie-gou](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711205729.jpg)

# 三、结论与局限性

## 1. 被试者能力分布

- 在不同组别题目不同但难度大致相同的假设下，将不同组别的同种类型题目杂糅计算，获得同学们的能力雷达图，发现如下几类代表性情况：

  - 认真完成题目，题目完成率一般，提交均分不高。查找、排序、线性表等类型表现较好，而树结构、图结构等较难类型表现相对一般。

    ![image-20200711205410672](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711205411.png)

    ![image-20200711211639804](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711211641.png)

    可以看出，id为47774的被试者与绝大多数被试者类似，平均最终得分均达到或接近100分，而平均提交得分却不算高。

  - 题目完成率高，完成所有题目，在每种类型上都能取得优异的成绩

    ![image-20200711212656693](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711212657.png)

    ![image-20200711212333873](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711212335.png)

    ![image-20200711212608087](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711212609.png)

  - 选择性完成部分题目，仅在最初做题兴致较高，而随着时间的推移逐渐陷入*放弃*的被试者

    ![image-20200711213103876](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711213105.png)

  - 最终放弃题目较难、占比不大的图结构，但较好地完成了其他项目的被试者

    ![image-20200711213216181](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711213217.png)

## 2. 组间分类别能力比较

![tu-jie-gou](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711213926.jpg)

- 以最具代表性的图结构为例，图结构被试者的分数分布曲线明显低于其他的题目，且在图结构组间分析中，第二组曲线明显较为弱势，说明第二组的图结构试题可能相对其他组别较难，或第二组同学在图结构题目中与其他组别差距较大。

![zi-fu-chuan](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711214203.jpg)

![xian-xing-biao](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711214206.jpg)

![shu-zi-cao-zuo](https://cse2020-dune.oss-cn-shanghai.aliyuncs.com/20200711214210.jpg)

- 而在数字操作、线性表、字符串这类大家掌握较好、题目也不易出难的类别中，五个组别的得分差距不大，且绝大多数同学的得分均较为理想。具体题目难度分析，有待进一步研究。



## 3. 研究局限性

- 受制于OJ系统提交的特点，同学们可以在一次提交前进行多次运行操作，但运行操作不计入提交次数、亦不存在所谓*运行记录*可供参考。因此，必然大量存在多次运行满意后再提交的受试者。必然降低平均提交分数、提交次数等作为参考数据的可信度。